<mat-card class="batch-form-card">
  <mat-card-header class="form-title">
    <mat-icon class="form-icon">group</mat-icon>
    <span>Add Batch</span>
  </mat-card-header>

  <mat-card-content>
    <form [formGroup]="batchForm" (ngSubmit)="onSubmit()">

      <!-- Batch Name -->
      <div class="form-row">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Batch Name</mat-label>
          <input matInput formControlName="batchName" required />
          <mat-error *ngIf="batchForm.get('batchName')?.hasError('required')">
            Batch Name is required
          </mat-error>
        </mat-form-field>
      </div>

      <!-- selectbranch -->
      <mat-form-field appearance="outline" class="full-width">
      <mat-label>Select Branch</mat-label>
      <mat-select formControlName="branchId">
      <mat-option *ngFor="let b of branches" [value]="b.branchId">
      {{ b.branchName }}
      </mat-option>
      </mat-select>
      </mat-form-field>


      <!-- Batch Time Row -->
      <div class="form-row">
        <label class="time-label">Batch Time</label>
        <div class="time-grid">

          <!-- From Time -->
          <mat-form-field appearance="outline" class="quarter-width">
            <mat-label>From</mat-label>
            <input matInput type="time" formControlName="batchTimeFrom" required />
            <mat-error *ngIf="batchForm.get('batchTimeFrom')?.hasError('required')">
              From time is required
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="quarter-width no-label">
            <mat-select formControlName="batchTimeFromPeriod" required>
              <mat-option value="AM">AM</mat-option>
              <mat-option value="PM">PM</mat-option>
            </mat-select>
            <mat-error *ngIf="batchForm.get('batchTimeFromPeriod')?.hasError('required')">
              Period is required
            </mat-error>
          </mat-form-field>

          <!-- To Time -->
          <mat-form-field appearance="outline" class="quarter-width">
            <mat-label>To</mat-label>
            <input matInput type="time" formControlName="batchTimeTo" required />
            <mat-error *ngIf="batchForm.get('batchTimeTo')?.hasError('required')">
              To time is required
            </mat-error>
          </mat-form-field>

          <!-- To AM/PM (no label) -->
          <mat-form-field appearance="outline" class="quarter-width no-label">
            <mat-select formControlName="batchTimeToPeriod" required>
              <mat-option value="AM">AM</mat-option>
              <mat-option value="PM">PM</mat-option>
            </mat-select>
            <mat-error *ngIf="batchForm.get('batchTimeToPeriod')?.hasError('required')">
              Period is required
            </mat-error>
          </mat-form-field>

        </div>
      </div>

      <!-- Description -->
      <div class="form-row">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Batch Description</mat-label>
          <textarea matInput formControlName="batchDescription" placeholder="Enter description" rows="2"></textarea>
        </mat-form-field>
      </div>
      <div *ngIf="errorMessage" style="color: red; margin-bottom: 16px;">
        {{errorMessage}}
      </div>


      <!-- Submit Button -->
      <div class="form-actions">
        <button mat-raised-button color="primary" type="submit" [disabled]="batchForm.invalid">
          Add Batch
        </button>
      </div>
    </form>
  </mat-card-content>
</mat-card>